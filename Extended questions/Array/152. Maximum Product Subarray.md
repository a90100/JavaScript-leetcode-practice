# 152. Maximum Product Subarray

## è§£é¡Œç¨‹å¼ç¢¼

### è§£æ³• 1

```javascript
var maxProduct = function (nums) {
  let max = nums[0];
  let preMax = nums[0];
  let preMin = nums[0];

  for (let i = 1; i < nums.length; i++) {
    let curMax = Math.max(nums[i] * preMax, nums[i], nums[i] * preMin);
    preMin = Math.min(nums[i] * preMax, nums[i], nums[i] * preMin);
    preMax = curMax;

    max = Math.max(max, preMax);
  }
  return max;
};
```

### è§£æ³• 2

```javascript
var maxProduct = function (nums) {
  let max = Math.max(...nums);
  const splitZeroNums = [];
  let tempArr = [];

  for (let i = 0; i < nums.length; i++) {
    if (nums[i] !== 0) {
      tempArr.push(nums[i]);
    } else {
      if (tempArr.length) splitZeroNums.push(tempArr);
      tempArr = [];
    }
  }
  if (tempArr.length) splitZeroNums.push(tempArr);

  for (let i = 0; i < splitZeroNums.length; i++) {
    let curSplitZeroNumArr = splitZeroNums[i];
    const prefixNums = [curSplitZeroNumArr[0]];
    const postfixNums = [curSplitZeroNumArr[curSplitZeroNumArr.length - 1]];

    for (let i = 1; i < curSplitZeroNumArr.length; i++) {
      prefixNums.push(prefixNums[i - 1] * curSplitZeroNumArr[i]);
    }

    for (let i = curSplitZeroNumArr.length - 2; i > 0; i--) {
      postfixNums.push(postfixNums[postfixNums.length - 1] * curSplitZeroNumArr[i]);
    }

    max = Math.max(max, ...prefixNums, ...postfixNums);
  }

  return max;
};
```

## è§£é¡Œæ€è·¯ã€æ¼”ç®—æ³•

### è§£æ³• 1

æŒºå¥½çš„è§£æ³•ï¼Œç¢°åˆ° 0 çš„ case åœ¨ç”¨ Math API æ¯”å¤§å°æ™‚å·²ç¶“è¢«è™•ç†æ‰ï¼Œè€Œå› ç‚ºæœ‰è² æ•¸çš„é—œä¿‚ï¼Œæœ‰å¯èƒ½åŸæœ¬æ¥µå°çš„è² æ•¸ï¼Œåˆç¢°åˆ°ä¸€å€‹è² æ•¸ç›¸ä¹˜ï¼Œ

å°±è®Šæˆä¸€å€‹æ¥µå¤§çš„æ­£æ•¸ï¼Œæ‰€ä»¥é™¤äº†è¨˜éŒ„ç•¶å‰éæ­·è‡³ä»Šçš„æœ€å¤§çš„æ­£æ•¸å¤–ï¼Œä¹Ÿè¦æŠŠéæ­·è‡³ä»Šçš„æœ€å°çš„è² æ•¸è¨˜éŒ„ä¸‹ä¾†ã€‚

### è§£æ³• 2

è‡ªå·±æƒ³åˆ°çš„è§£æ³•ï¼Œå°‡åŸæœ¬çš„é™£åˆ—è½‰æˆäºŒç¶­é™£åˆ—ï¼ŒäºŒç¶­é™£åˆ—å…§ä¸æœƒå‡ºç¾ 0ï¼Œæ‰€ä»¥å°±å¯ä»¥æ¸›å°‘è™•ç† 0 çš„ caseã€‚

æ¥ä¸‹ä¾†å°±æ˜¯å–æ¯å€‹å­é™£åˆ—çš„æœ€å¤§å€¼ä¸¦åšè¨˜éŒ„ã€‚

ex: `nums = [-2,0,3,0,-4,0,5,2,0]`ï¼Œå‰‡ `splitZeroNums = [ [ -2 ], [ 3 ], [ -4 ], [ 5, 2 ] ]`

## è§£æ³•çš„æ™‚é–“ã€ç©ºé–“è¤‡é›œåº¦

æ™‚é–“è¤‡é›œåº¦: è§£æ³• 1: O(n)
ç©ºé–“è¤‡é›œåº¦: è§£æ³• 1: O(1)

## åƒè€ƒè³‡æ–™

[Maximum Product Subarray - Dynamic Programming - Leetcode 152](https://youtu.be/lXVy6YWFcRM)

[ğŸ’¡JavaScript Solution w/ Explanation](https://leetcode.com/problems/maximum-product-subarray/solutions/416395/javascript-solution-w-explanation/)
